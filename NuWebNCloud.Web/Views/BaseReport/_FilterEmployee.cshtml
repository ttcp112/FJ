@model NuWebNCloud.Shared.Models.Reports.BaseReportModel
@if (Model.ListStoreEmpl != null && Model.ListStoreEmpl.Count > 0)
{
    var lstStore = Model.ListStoreEmpl;
    <!-- start accordion -->
    <div class="accordion" id="accordion" role="tablist" aria-multiselectable="true">
        @if (lstStore != null && lstStore.Count > 0)
        {
            for (int s = 0; s < lstStore.Count; s++)
            {
                var store = lstStore[s];
                <div class="panel">
                    <a class="panel-heading" role="tab" id="heading_@s" data-toggle="collapse" data-parent="#accordion" href="#s_@s"
                       aria-expanded="@string.Format("{0}", s==0 ? "true" : "false")" aria-controls="s_@s" style="background-color: #337ab7; color: #fff;">
                        <h4 class="panel-title">
                            @store.StoreName&nbsp;&nbsp;
                            <span class="pull-right"><input type="checkbox" onchange="ToogleCheckAll(this, '.employee-items-@s')" id="checkAllEmp-@s" class="chkAll chkReportZoom"></span>
                        </h4>
                    </a>
                    @Html.Hidden(string.Format("ListStoreEmpl[{0}].OffSet", s), Model.ListStoreEmpl[s].OffSet)
                    @Html.Hidden(string.Format("ListStoreEmpl[{0}].StoreID", s), Model.ListStoreEmpl[s].StoreID)
                    @Html.Hidden(string.Format("ListStoreEmpl[{0}].StoreName", s), Model.ListStoreEmpl[s].StoreName)
                    <div id="s_@s" class="panel-collapse collapse @string.Format("{0}", s==0 ? "in" : "")" role="tabpanel" aria-labelledby="heading_@s">
                        <div class="">
                            <table class="table table-bordered" style="margin-bottom:0px;">
                                <tbody class="employee-items-@s">
                                    @for (int i = 0; i < store.ListEmployeesSel.Count; i++)
                                    {
                                        var item = store.ListEmployeesSel[i];
                                        <tr>
                                            <td class="parent">&nbsp;+ @item.Name</td>
                                            <td class="text-right">
                                                <label>
                                                    @Html.CheckBox(string.Format("ListStoreEmpl[{0}].ListEmployeesSel[{1}].Checked", s, i), item.Checked, new
                                               {
                                                   @onClick = "checkItemEmpl('" + s + "','" + i + "')",
                                                   @id = "parent-" + s + "-" + i + "",
                                                   @class = "chkReportZoom"
                                               })
                                                    @Html.Hidden(string.Format("ListStoreEmpl[{0}].ListEmployeesSel[{1}].ID", s, i), item.ID)
                                                    @Html.Hidden(string.Format("ListStoreEmpl[{0}].ListEmployeesSel[{1}].Name", s, i), item.Name)
                                                    @Html.Hidden(string.Format("ListStoreEmpl[{0}].ListEmployeesSel[{1}].StoreId", s, i), item.StoreId)
                                                    @Html.Hidden(string.Format("ListStoreEmpl[{0}].ListEmployeesSel[{1}].StoreName", s, i), item.StoreName)
                                                </label>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            }
        }
    </div>
    <!-- end of accordion -->

    @*<table class="table table-hover">
            <thead>
                <tr style="background-color: #337ab7; color: #fff;">
                    <td class="align-left"><label>Select All </label></td>
                    <td class="align-right"><label><input type="checkbox" onchange="ToogleCheckAll(this, '.employee-items')" id="checkAllEmp"></label></td>
                </tr>
            </thead>
            <tbody class="employee-items">
                @for (int i = 0; i < Model.ListEmployees.Count; i++)
                {
                    <tr>
                        <td class="align-left">@Model.ListEmployees[i].StoreName - @Model.ListEmployees[i].Name</td>
                        <td class="align-right">
                            <label>
                                @Html.CheckBox(string.Format("ListEmployees[{0}].Checked", i), Model.ListEmployees[i].Checked, new { @onClick = "checkItem()" })
                                @Html.Hidden(string.Format("ListEmployees[{0}].ID", i), Model.ListEmployees[i].ID)
                                @Html.Hidden(string.Format("ListEmployees[{0}].Name", i), Model.ListEmployees[i].Name)
                                @Html.Hidden(string.Format("ListEmployees[{0}].StoreId", i), Model.ListEmployees[i].StoreId)
                                @Html.Hidden(string.Format("ListEmployees[{0}].StoreName", i), Model.ListEmployees[i].StoreName)
                            </label>
                        </td>
                    </tr>
                }
            </tbody>
        </table>*@

    <style>
        /*.align-left {
                text-align: left !important;
            }

            .align-right {
                text-align: center !important;
            }*/

        .parent {
            padding-left: 25px !important;
        }

        #accordion tr td {
            background-color: #ededed;
        }
            #accordion tr td:first-child {
                width: 92%;
            }
    </style>
    <script>
        $(function () {
            $('.chkAll').on('click', function (e) {
                e.stopPropagation();
            });
        });

        function checkItemEmpl(store, parent) {
            var countchk = $('table > tbody.employee-items-' + store + ' input[type="checkbox"]').length;
            var countchkCheck = $('table > tbody.employee-items-' + store + ' input[type="checkbox"]').filter(":checked").length;
            $('#checkAllEmp-' + store).prop('checked', (countchkCheck == countchk));
        }
    </script>
}